[СОДЕРЖАНИЕ](README.md)

# Введение

API строится на базовых принципах построения REST-сервисов и в основном ориентировано на использование AJAX с обменом данными в формате JSON.

## Справочники

Справочники предоставляют данные по моделям автомобилей, типам автомобилей, целям использования и другие параметры, которые используются при расчете тарифов КАСКО.

Для большей понятности справочники представлены в главном интерфейсе калькулятора. Например, когда поле выбора марки автомобиля представляет собой справочник марок автомобилей.

## Расчеты

Расчеты представляют собой объект параметров по которым будет производится расчет. Он содержит информацию об автомобиле, водителях и условия страхования.

## Результаты расчета

Когда производится расчет к объекту расчета привязываются независимые объекты результатов расчета, которые предоставляют информацию о результате расчета по отдельно взятой страховой компании.

## Соглашения

Для дальнейшего изложения документации, и для избавления от путаницы, для расчета и результата расчета будут использоваться имена Calculation и Result соответвенно.

# Процесс расчета

Для формирования запроса на создание Calculation и Result, предварительно требуется получить все справочники, используемые в системы и справочник с включенными страховыми компаниями. После получения справочников и информации из них, можно формировать запросы для непосредственного расчета.

Многие справочники могут долгое время не изменяться, и иметь статическую структуру. Хранить справочники в кэше, или запрашивать их перед каждым созданием расчета - выбирается на усмотрение разработчика конечного приложения, которое будет обращаться к API, с оглядкой на архитектуру и требования конечного приложения и наиболее приемлемых методов.

Расчет полиса производится в два этапа.

## Этап I

На первом этапе формируется запрос для создания объекта Calculation. Используя API, данный запрос отправляется, и от сервера приходит ответ. В ответе будет указан идентификатор созданного Calculation.

## Этап II

На втором этапе, создаются объекты Result, зная идентификатор Calculation, и зная идентификаторы нужных страховых компаний.

В системе Умный Полис создание результатов расчета производится не пакетно, а по отдельности для каждой компании, что позволяет ускорить отзывчивость системы, и формировать расчеты только для нужных или выбранных компаний.

[СОДЕРЖАНИЕ](README.md)
